<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ObsOperators · DataAssimilationBenchmarks</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">DataAssimilationBenchmarks</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">DataAssimilationBenchmarks</span><ul><li><a class="tocitem" href="../../../home/Introduction/">Introduction</a></li><li><a class="tocitem" href="../../../home/Getting Started/">Getting Started</a></li><li><a class="tocitem" href="../../../home/DataAssimilationBenchmarks/">Global Types</a></li></ul></li><li><span class="tocitem">Submodules</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox" checked/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../L96/">L96</a></li><li><a class="tocitem" href="../IEEE39bus/">IEEE39bus</a></li><li class="is-active"><a class="tocitem" href>ObsOperators</a><ul class="internal"><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../methods/DeSolvers/">DeSolvers</a></li><li><a class="tocitem" href="../../methods/EnsembleKalmanSchemes/">EnsembleKalmanSchemes</a></li><li><a class="tocitem" href="../../methods/XdVAR/">XdVAR</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Experiments</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../experiments/GenerateTimeSeries/">GenerateTimeSeries</a></li><li><a class="tocitem" href="../../experiments/FilterExps/">FilterExps</a></li><li><a class="tocitem" href="../../experiments/SmootherExps/">SmootherExps</a></li><li><a class="tocitem" href="../../experiments/SingleExperimentDriver/">SingleExperimentDriver</a></li><li><a class="tocitem" href="../../experiments/Slurm/">Slurm</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Analysis</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../analysis/ProcessExperimentData/">ProcessExperimentData</a></li><li><a class="tocitem" href="../../analysis/PlotExperimentData/">PlotExperimentData</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Submodules</a></li><li><a class="is-disabled">Models</a></li><li class="is-active"><a href>ObsOperators</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>ObsOperators</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/cgrudz/DataAssimilationBenchmarks.jl/blob/master/docs/src/submodules/models/ObsOperators.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Observation-Operators"><a class="docs-heading-anchor" href="#Observation-Operators">Observation Operators</a><a id="Observation-Operators-1"></a><a class="docs-heading-anchor-permalink" href="#Observation-Operators" title="Permalink"></a></h1><p>The methods in this module define observation operators mapping the state model to the observation space.  In current experiments, the observation operator is hard-coded in the driver script with a statement</p><pre><code class="nohighlight hljs">H_obs = alternating_obs_operator</code></pre><p>defining the observation operator. The dimension of the observation and the nonlinear transform applied can be controlled with the parameters of <a href="#DataAssimilationBenchmarks.ObsOperators.alternating_obs_operator-Union{Tuple{T}, Tuple{Union{Vector{T1}, SubArray{T1, 1}} where T1&lt;:T, Int64, Dict{String, Any}}} where T&lt;:Real"><code>DataAssimilationBenchmarks.ObsOperators.alternating_obs_operator</code></a>.</p><p>Additional observation models are pending, following the convention where observation operators will be defined both for vector arguments and multi-arrays using mutliple dispatch with the conventions:</p><pre><code class="nohighlight hljs">function H_obs(x::VecA(T), obs_dim::Int64, kwargs::StepKwargs) where T &lt;: Real
function H_obs(x::ArView(T), obs_dim::Int64, kwargs::StepKwargs) where T &lt;: Real</code></pre><p>allowing for the same naming to be used for single states, time series of states and ensembles of states.</p><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="DataAssimilationBenchmarks.ObsOperators.alternating_obs_operator-Union{Tuple{T}, Tuple{Union{Vector{T1}, SubArray{T1, 1}} where T1&lt;:T, Int64, Dict{String, Any}}} where T&lt;:Real" href="#DataAssimilationBenchmarks.ObsOperators.alternating_obs_operator-Union{Tuple{T}, Tuple{Union{Vector{T1}, SubArray{T1, 1}} where T1&lt;:T, Int64, Dict{String, Any}}} where T&lt;:Real"><code>DataAssimilationBenchmarks.ObsOperators.alternating_obs_operator</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">alternating_obs_operator(x::VecA(T), obs_dim::Int64, kwargs::StepKwargs) where T &lt;: Real
alternating_obs_operator(ens::ArView(T), obs_dim::Int64,
                         kwargs::StepKwargs) where T &lt;: Real</code></pre><p>This produces observations of alternating state vector components for generating pseudo-data.</p><pre><code class="nohighlight hljs">return obs</code></pre><p>This operator takes a single model state <code>x</code> of type <a href="../../../home/DataAssimilationBenchmarks/#DataAssimilationBenchmarks.VecA-Tuple{Any}"><code>VecA</code></a>, a truth twin time series or an ensemble of states of type <a href="../../../home/DataAssimilationBenchmarks/#DataAssimilationBenchmarks.ArView-Tuple{Any}"><code>ArView</code></a>, and maps this data to the observation space via the method <a href="#DataAssimilationBenchmarks.ObsOperators.alternating_projector-Union{Tuple{T}, Tuple{Union{Vector{T1}, SubArray{T1, 1}} where T1&lt;:T, Int64}} where T&lt;:Real"><code>alternating_projector</code></a> and (possibly) a nonlinear transform. The truth twin in this version is assumed to be 2D, where the first index corresponds to the state dimension and the second index corresponds to the time dimension.  The ensemble is assumed to be 2D where the first index corresponds to the state dimension and the second index corresponds to the ensemble dimension. The <code>γ</code> parameter (optional) in <code>kwargs</code> of type  <a href="../../../home/DataAssimilationBenchmarks/#DataAssimilationBenchmarks.StepKwargs"><code>StepKwargs</code></a> controls the component-wise transformation of the remaining state vector components mapped to the observation space.  For <code>γ=1.0</code>, there is no transformation applied, and the observation operator acts as a linear projection onto the remaining components of the state vector, equivalent to not specifying <code>γ</code>. For <code>γ&gt;1.0</code>, the nonlinear observation operator of <a href="https://epubs.siam.org/doi/book/10.1137/1.9781611974546">Asch, et al. (2016).</a>, pg. 181 is applied,</p><p class="math-container">\[\begin{align}
\mathcal{H}(\pmb{x}) = \frac{\pmb{x}}{2}\circ\left[\pmb{1} + \left(\frac{\vert\pmb{x}\vert}{10} \right)^{\gamma - 1}\right]
\end{align}\]</p><p>where <span>$\circ$</span> is the Schur product, and which limits to the identity for <code>γ=1.0</code>. If <code>γ=0.0</code>, the quadratic observation operator of <a href="https://journals.ametsoc.org/view/journals/mwre/140/2/2011mwr3640.1.xml">Hoteit, et al. (2012).</a>,</p><p class="math-container">\[\begin{align}
\mathcal{H}(\pmb{x}) =0.05 \pmb{x} \circ \pmb{x}
\end{align}\]</p><p>is applied to the remaining state components (note, this is not a continuous limit). If <code>γ&lt;0.0</code>, the exponential observation operator of <a href="https://npg.copernicus.org/articles/21/955/2014/">Wu, et al. (2014).</a></p><p class="math-container">\[\begin{align}
\mathcal{H}(\pmb{x}) = \pmb{x} \circ \exp\{- \gamma \pmb{x} \}
\end{align}\]</p><p>is applied to the remaining state vector components, where the exponential is applied componentwise (note, this is also not a continuous limit).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cgrudz/DataAssimilationBenchmarks.jl/blob/b32d8c7ee41480ee9164eb62be3fe3ddd2795697/src/models/ObsOperators.jl#L93-L140">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DataAssimilationBenchmarks.ObsOperators.alternating_projector-Union{Tuple{T}, Tuple{Union{Vector{T1}, SubArray{T1, 1}} where T1&lt;:T, Int64}} where T&lt;:Real" href="#DataAssimilationBenchmarks.ObsOperators.alternating_projector-Union{Tuple{T}, Tuple{Union{Vector{T1}, SubArray{T1, 1}} where T1&lt;:T, Int64}} where T&lt;:Real"><code>DataAssimilationBenchmarks.ObsOperators.alternating_projector</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">alternating_projector(x::VecA(T), obs_dim::Int64) where T &lt;: Real
alternating_projector(ens::ArView(T), obs_dim::Int64) where T &lt;: Real</code></pre><p>Utility method produces a projection of alternating vector or ensemble components via slicing.</p><pre><code class="nohighlight hljs">return x
return ens</code></pre><p>This operator takes a single model state <code>x</code> of type <a href="../../../home/DataAssimilationBenchmarks/#DataAssimilationBenchmarks.VecA-Tuple{Any}"><code>VecA</code></a>, a truth twin time series or an ensemble of states of type <a href="../../../home/DataAssimilationBenchmarks/#DataAssimilationBenchmarks.ArView-Tuple{Any}"><code>ArView</code></a>, and maps this data to alternating row components.  If truth twin is 2D, then the first index corresponds to the state dimension and the second index corresponds to the time dimension.  The ensemble is assumed to be 2D where the first index corresponds to the state dimension and the second index corresponds to the ensemble dimension.</p><p>The operator selects row components of the input to keep based on the <code>obs_dim</code>. States correpsonding to even state dimension indices are removed from the state vector until the observation dimension is appropriate. If the observation dimension is less than half the state dimension, states corresponding to odd state dimension idices are subsequently removed until the observation dimension is appropriate.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/cgrudz/DataAssimilationBenchmarks.jl/blob/b32d8c7ee41480ee9164eb62be3fe3ddd2795697/src/models/ObsOperators.jl#L11-L35">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../IEEE39bus/">« IEEE39bus</a><a class="docs-footer-nextpage" href="../../methods/DeSolvers/">DeSolvers »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.21 on <span class="colophon-date" title="Wednesday 20 July 2022 17:48">Wednesday 20 July 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
